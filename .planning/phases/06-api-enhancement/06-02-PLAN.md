---
phase: 06-api-enhancement
plan: 02
type: execute
model: haiku
context_percentage: 20
complexity_score: 0.44
model_rationale: |
  Plan 2 (20% context) implements simple frontend search UI component
  using established shadcn/ui patterns.

  Complexity score: 0.44 (very simple - standard component)
  Domain: Standard UI (form component) → ×1
  Risk: Low (isolated component, no system impact)
  Pattern: Exact pattern exists (shadcn/ui forms, search inputs)

  Routing: Haiku ✅
  Rationale: Simple component following proven patterns.
  Haiku efficient at straightforward form implementation.
---

# Plan 2: Frontend Search UI Component

## Overview

Create a search interface component for the Next.js frontend using the existing API client.

**Scope:** 20% context (1 task)
**Model:** Haiku
**Complexity:** 0.44 (very simple)

---

## Task 1: Create Search Component (20% context)

### Objective

Build a reusable search UI component that calls the new search API endpoint.

### Requirements

1. Component location: `apps/web/components/search/SearchInterface.tsx`
   - File naming: PascalCase for React components
   - Pattern: Follow existing component patterns in `apps/web/components/`

2. Component features:
   - Search input field
   - Filter controls (type dropdown, date range picker)
   - Results display area
   - Pagination controls
   - Loading/error states

3. Implementation:
   - Use React hooks (useState, useEffect)
   - Use existing API client from `apps/web/lib/api/client.ts`
   - Use shadcn/ui components for UI
   - Follow TypeScript types from API responses
   - Handle loading states with loading spinner
   - Handle errors with user-friendly messages

4. Component API:
   ```typescript
   interface SearchInterfaceProps {
     onResultsChange?: (results: SearchResult[]) => void;
     className?: string;
   }
   ```

### Technical Constraints

- **Framework:** Next.js 15 with React 19 (required - NOT Svelte, Vue)
- **Language:** TypeScript (required)
- **UI Library:** shadcn/ui (required)
- **Styling:** Tailwind CSS v4 (required)
- **API Client:** Use `apps/web/lib/api/client.ts` (existing pattern)
- **Location:** `apps/web/components/search/`

### Reference Implementation

Follow existing component patterns:

- `apps/web/components/` - Other components for reference
- `apps/web/lib/api/client.ts` - API client usage
- shadcn/ui form components
- Existing React hooks patterns

### Features

1. **Search Input**
   - Text input field
   - Placeholder: "Search documents..."
   - onChange handler to update query

2. **Filter Controls**
   - Type filter dropdown (document types)
   - Date range picker (created_after, created_before)
   - Clear filters button

3. **Results Display**
   - Results list with document preview
   - Relevance score indicator
   - Highlight matching text (if available)

4. **Pagination**
   - Previous/Next buttons
   - Page indicator
   - Results per page selector (10, 20, 50)

5. **States**
   - Idle: Ready for search
   - Loading: Showing spinner while fetching
   - Results: Display matching documents
   - Empty: "No results found" message
   - Error: User-friendly error message

### Security & Best Practices

- ✅ Validate search input (prevent XSS)
- ✅ Use API client for requests (not direct fetch)
- ✅ Handle API errors gracefully
- ✅ Don't expose sensitive data in UI
- ✅ Follow accessibility best practices (ARIA labels)
- ✅ Use TypeScript for type safety

---

## Acceptance Criteria

- [ ] Component created at `apps/web/components/search/SearchInterface.tsx`
- [ ] Uses existing API client from `apps/web/lib/api/client.ts`
- [ ] Uses shadcn/ui components for UI
- [ ] TypeScript types defined for props and API responses
- [ ] Search input works correctly
- [ ] Filter controls work correctly
- [ ] Results display correctly
- [ ] Pagination controls work correctly
- [ ] Loading state shows spinner
- [ ] Error state shows message
- [ ] Empty results show message
- [ ] Component follows existing code patterns
- [ ] TypeScript compiles without errors
- [ ] No console warnings

---

## Commit Strategy

```bash
git commit -m "feat(web): add search interface component"
```

---

## Notes

- Complexity: 0.44 (Haiku routing appropriate)
- Context: 20% (well within budget)
- Pattern: Standard React component - many examples in codebase
- No novel architecture - straightforward UI implementation
- Exact pattern exists (form components, pagination, filtering)
- Minimal complexity - Haiku can handle efficiently

---

## Optional Enhancements (Not in this plan)

If additional context becomes available, consider:

- Advanced search syntax support
- Search history/suggestions
- Export results to CSV
- Saved search filters
- Search result analytics

But these are out of scope for Plan 2.
